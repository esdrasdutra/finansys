<div class="custom-container">    
    <section id="filter-container" class="dirigente-percent">
        <div class="search-bar">
            <div class="search-name">
                <div class="input-group">
                    <mat-icon aria-hidden="false" aria-label="Filter Icon" fontIcon="filter_alt"></mat-icon>
                    <select id="input-group-filter">
                        <option *ngFor="let filtro of filtros" [value]="filtro">{{ filtro }}</option>
                    </select>
                    <mat-icon aria-hidden="false" aria-label="Search Icon" fontIcon="filter_list"></mat-icon>
                    <select id="input-group-filter" [(ngModel)]="selectedMonth">
                        <option *ngFor="let mes of meses" [value]="mes">{{ mes }}</option>
                    </select>                    
                    <input type="text" (keyup)="onKey($event)">
                </div>
            </div>

        </div>
    </section>
    <br>
    <button type="button" (click)="handleSumTotal()">Relatório de Despesas / Receitas das Congregações</button>
    <button type="button" (click)="handleSumByArea()">Relatório de Despesas / Receitas por Área</button>
    <button type="button" (click)="handleDizimistas()">Relatório Quantitativo de Dizimistas - OBREIROS</button>
    <button type="button" (click)="handlePeriodo()"> Relatório de Entradas por Período</button>
    <button type="button" (click)="handleDizimoDirigentes()"> 10% DIRIGENTES</button>
    <select name="saidas" id="custoOption" (change)="handleCustoSelection($event.target)">
        <option *ngFor="let outflow of outflows" [value]="outflow">{{ outflow }}</option>
    </select>


    <ng-container *ngIf="sumTotal">
        <div aria-label="Basic checkbox toggle button group">
            <div>
                <input type="checkbox" class="btn-check" id="btnToggle" autocomplete="off" (click)="toggleAll($event)">
                <label class="btn btn-primary" for="btnToggle">SELECIONAR TODOS</label>
            </div>
            <div class="btn-group" role="group" *ngFor="let cong of congregations; index as i">
                <input type="checkbox" class="btn-check" id="{{ 'btncheck-' + i}}" autocomplete="off"
                    (click)="handleToggle($event, i)" [checked]="isChecked()">
                <label class="btn btn-primary" for="{{ 'btncheck-' + i}}">{{ cong }}</label>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="filterByArea">
        <fieldset class="demo-fieldset">
            <div> SELECIONAR ÁREA:
                <select name="option" id="areaOption" (change)="handleAreaSelection($event.target)">
                    <option *ngFor="let area of areas" [value]="area">{{ area }}</option>
                </select>
            </div>
        </fieldset>
    </ng-container>

    <button type="button" (click)="downloadPdf()">IMPRIMIR RELATORIO</button>
    <mat-tab-group mat-tab-align="start" animationDuration="0ms">
        <mat-tab label="DESPESAS" class="despesas-tab">
            <section class="mat-elevation-z8" tabindex="0">
                <table mat-table [dataSource]="dataSourceDespesa">
                    <ng-container *ngFor="let item of displayedColumnsOut" [matColumnDef]="item">
                        <th mat-header-cell class="f-sm" *matHeaderCellDef>
                            <div *ngIf="item === 'valor';then isValue else notValue"></div>
                            <ng-template #isValue> (R$) {{ columnMapping[item] }} </ng-template>
                            <ng-template #notValue> {{ columnMapping[item] }} </ng-template>
                        </th>
                        <td mat-cell class="f-sm" *matCellDef="let element">
                            <ng-container *ngIf="item === 'valor'">
                                {{ element[item] | currency: 'BRL' }}
                            </ng-container>

                            <ng-container *ngIf="item === 'data_lan' || item === 'data_ven' || item === 'mes'">
                                {{ element[item] }}
                            </ng-container>

                            <ng-container
                                *ngIf="item !== 'valor' && item !== 'data_lan' && item !== 'data_ven' && item !== 'mes'">
                                {{ element[item] }}
                            </ng-container>

                        </td>
                    </ng-container>
                    <tr class="f-sm" mat-header-row *matHeaderRowDef="displayedColumnsOut, sticky: true"></tr>

                    <tr mat-row class="f-sm" *matRowDef="let row; columns: displayedColumnsOut">
                    </tr>
                </table>
            </section>
        </mat-tab>

        <mat-tab label="RECEITAS" class="receitas-tab" id="#mat-table-receitas">
            <section class="mat-elevation-z8" tabindex="0">
                <table mat-table [dataSource]="newDataReceitas">
                    <ng-container *ngFor="let item of displayedColumnsIn" [matColumnDef]="item">
                        <th mat-header-cell class="f-sm" *matHeaderCellDef>
                            <div *ngIf="item === 'valor'; then isValue else notValue"></div>
                            <ng-template #isValue> (R$) {{ columnMapping[item] }} </ng-template>
                            <ng-template #notValue> {{ columnMapping[item] }} </ng-template>
                        </th>
                        <td mat-cell class="f-sm" *matCellDef="let element">
                            <ng-container *ngIf="item === 'valor'">
                                {{ element[item] | currency: 'BRL' }}
                            </ng-container>

                            <ng-container *ngIf="item === 'data_lan' || item === 'data_ven' || item === 'mes'">
                                {{ element[item] }}
                            </ng-container>

                            <ng-container
                                *ngIf="item !== 'valor' && item !== 'data_lan' && item !== 'data_ven' && item !== 'mes'">
                                {{ element[item] }}
                            </ng-container>

                        </td>
                    </ng-container>
                    <tr class="f-sm" mat-header-row *matHeaderRowDef="displayedColumnsIn, sticky: true"></tr>

                    <tr mat-row class="f-sm" *matRowDef="let row; columns: displayedColumnsIn">
                    </tr>
                </table>
            </section>
        </mat-tab>
    </mat-tab-group>
</div>